@tailwind base;
@tailwind components;
@tailwind utilities;

/* ── Design tokens ──────────────────────────────────────────────────────────── */
:root {
  /* Backgrounds */
  --bg:            #000000;
  --bg-alt:        #050505;
  --surface:       #0d0d0d;
  --surface-alt:   #111111;
  --surface-raised:#161616;
  /* Borders */
  --border:        rgba(255,255,255,0.06);
  --border-strong: rgba(255,255,255,0.10);
  /* Text */
  --text:          #ffffff;
  --text-secondary:#a1a1aa;
  --text-muted:    #52525b;
  --text-disabled: #3f3f46;
  /* Interactive */
  --interactive:   rgba(255,255,255,0.04);
  --interactive-hover: rgba(255,255,255,0.07);
  --interactive-active: rgba(255,255,255,0.10);
  /* Accent (white-based for dark) */
  --accent:        #ffffff;
  --accent-subtle: rgba(255,255,255,0.08);
  /* Status */
  --success:       #22c55e;
  --success-subtle:rgba(34,197,94,0.10);
  --error:         #ef4444;
  --error-subtle:  rgba(239,68,68,0.10);
  --warning:       #f59e0b;
  --warning-subtle:rgba(245,158,11,0.10);
  /* Input */
  --input-bg:      #0d0d0d;
  --input-border:  rgba(255,255,255,0.08);
  --input-focus:   rgba(255,255,255,0.15);
  /* Overlay */
  --overlay:       rgba(0,0,0,0.75);
  /* Skeleton */
  --skeleton-from: #111111;
  --skeleton-to:   rgba(255,255,255,0.06);
}

.light {
  /* Backgrounds */
  --bg:            #f8f8f8;
  --bg-alt:        #f2f2f2;
  --surface:       #ffffff;
  --surface-alt:   #fafafa;
  --surface-raised:#ffffff;
  /* Borders */
  --border:        rgba(0,0,0,0.07);
  --border-strong: rgba(0,0,0,0.12);
  /* Text */
  --text:          #111111;
  --text-secondary:#52525b;
  --text-muted:    #a1a1aa;
  --text-disabled: #d4d4d8;
  /* Interactive */
  --interactive:   rgba(0,0,0,0.03);
  --interactive-hover: rgba(0,0,0,0.055);
  --interactive-active: rgba(0,0,0,0.08);
  /* Accent */
  --accent:        #111111;
  --accent-subtle: rgba(0,0,0,0.06);
  /* Status */
  --success:       #16a34a;
  --success-subtle:rgba(22,163,74,0.10);
  --error:         #dc2626;
  --error-subtle:  rgba(220,38,38,0.10);
  --warning:       #d97706;
  --warning-subtle:rgba(217,119,6,0.10);
  /* Input */
  --input-bg:      #ffffff;
  --input-border:  rgba(0,0,0,0.10);
  --input-focus:   rgba(0,0,0,0.18);
  /* Overlay */
  --overlay:       rgba(0,0,0,0.45);
  /* Skeleton */
  --skeleton-from: #e4e4e7;
  --skeleton-to:   rgba(255,255,255,0.8);
}

/* ── Global reset ────────────────────────────────────────────────────────────── */
* { -webkit-tap-highlight-color: transparent; }

html {
  background: var(--bg);
  color: var(--text);
  overflow-x: hidden;
  max-width: 100vw;
}
body {
  background: var(--bg);
  overflow-x: hidden;
  -webkit-font-smoothing: antialiased;
  transition: background 0.3s, color 0.3s;
}

/* ── Scrollbar ───────────────────────────────────────────────────────────────── */
::-webkit-scrollbar { width: 0; }

/* ── Safe areas ──────────────────────────────────────────────────────────────── */
.pb-safe { padding-bottom: env(safe-area-inset-bottom, 0px); }
.pt-safe { padding-top: env(safe-area-inset-top, 0px); }

/* ── Glass card ──────────────────────────────────────────────────────────────── */
.glass {
  background: rgba(255,255,255,0.02);
  border: 1px solid rgba(255,255,255,0.06);
  backdrop-filter: blur(12px);
}
.light .glass {
  background: rgba(255,255,255,0.85);
  border: 1px solid rgba(0,0,0,0.08);
  backdrop-filter: blur(12px);
}

/* ── Skeleton loading ────────────────────────────────────────────────────────── */
.shimmer-bg {
  background: linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.05) 50%, transparent 100%);
  background-size: 200% 100%;
}
.skeleton {
  background: linear-gradient(90deg, var(--skeleton-from) 0%, var(--skeleton-to) 50%, var(--skeleton-from) 100%);
  background-size: 200% 100%;
  animation: shimmer 1.5s ease-in-out infinite;
  border-radius: 0.5rem;
}

/* ── Form inputs: universal dark/light ───────────────────────────────────────── */
input, textarea, select {
  background: var(--input-bg) !important;
  border-color: var(--input-border) !important;
  color: var(--text) !important;
  transition: border-color 0.15s, background 0.15s;
}
input::placeholder, textarea::placeholder {
  color: var(--text-muted) !important;
}
input:focus, textarea:focus, select:focus {
  border-color: var(--input-focus) !important;
  outline: none;
}
/* Autofill overrides */
input:-webkit-autofill,
input:-webkit-autofill:hover,
input:-webkit-autofill:focus,
input:-webkit-autofill:active {
  -webkit-box-shadow: 0 0 0 100px var(--input-bg) inset !important;
  -webkit-text-fill-color: var(--text) !important;
  caret-color: var(--text);
  transition: background-color 9999s ease-out;
}

/* ── Image rendering in light mode ──────────────────────────────────────────── */
.light img.question-image {
  background: #f0f0f0;
  border: 1px solid var(--border);
}

/* ── Quiz image: constrain and center ────────────────────────────────────────── */
.question-image {
  width: 100%;
  max-height: 320px;
  object-fit: contain;
  border-radius: 12px;
  display: block;
}
.question-image-error {
  display: none;
}

/* ── Prose: question text ────────────────────────────────────────────────────── */
.question-text {
  color: var(--text);
  line-height: 1.65;
}

/* ── Overlay / modal backdrop ────────────────────────────────────────────────── */
.modal-overlay {
  background: var(--overlay);
  backdrop-filter: blur(4px);
}

/* ── Animations ──────────────────────────────────────────────────────────────── */
@keyframes marquee {
  0%   { transform: translateX(0); }
  100% { transform: translateX(-50%); }
}

@keyframes shimmer {
  0%   { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}
